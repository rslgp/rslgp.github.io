<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bootstrap Nav Pills with Content</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />

    <style>
      /* FEATURES */
      .checkMark {
        transform: rotate(deg);
      }
      .status {
        text-align: center;
      }
      /* TRILHAS */
      .nav-link:hover {
        background-color: #0d6dfd54;
        border-radius: 20px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h2>CREA empreende</h2>
      <ul class="nav nav-pills mb-3" id="trilha-pills-tab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="trilha-cnpj"
            data-bs-toggle="pill"
            data-bs-target="#pills-home"
            type="button"
            role="tab"
            aria-controls="pills-home"
            aria-selected="true"
          >
            CNPJ
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="trilha-fiscal"
            data-bs-toggle="pill"
            data-bs-target="#pills-profile"
            type="button"
            role="tab"
            aria-controls="pills-profile"
            aria-selected="false"
          >
            FISCAL
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="trilha-venda"
            data-bs-toggle="pill"
            data-bs-target="#pills-profile"
            type="button"
            role="tab"
            aria-controls="pills-profile"
            aria-selected="false"
          >
            VENDA
          </button>
        </li>

        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="trilha-art"
            data-bs-toggle="pill"
            data-bs-target="#pills-profile"
            type="button"
            role="tab"
            aria-controls="pills-profile"
            aria-selected="false"
          >
            EMITIR ART
          </button>
        </li>
      </ul>

      <!-- PARCEIROS COLUMN -->
      <div class="row">
        <div class="col-md-4">
          <h4>Parceiros</h4>
          <ul
            class="nav nav-pills flex-column mb-3"
            id="parceiros-pills-tab"
            role="tablist"
          >
            <li class="nav-item" role="presentation">
              <button
                class="nav-link active"
                id="parceiros-cowork"
                data-bs-toggle="pill"
                data-bs-target="#pills-home"
                type="button"
                role="tab"
                aria-controls="pills-home"
                aria-selected="true"
              >
                COWORK
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button
                class="nav-link"
                id="parceiros-nubank"
                data-bs-toggle="pill"
                data-bs-target="#pills-profile"
                type="button"
                role="tab"
                aria-controls="pills-profile"
                aria-selected="false"
              >
                NUBANK
              </button>
            </li>
          </ul>
        </div>

        <!-- CONTEUDO  -->      

        <div class="col-md-8">
          <div class="tab-content" id="Content">
            <div class="tab-pane fade show active" id="conteudo-FADE"></div>
          </div>
        </div>

        <!-- FEATURES -->
        <table class="table table-bordered" id="features-table">
            <thead>
              <tr>
                <th scope="col">Feature</th>
                <th scope="col" class="status">Status</th>
              </tr>
            </thead>
            <tbody id="features-content">
              <tr>
                <td class="feat">Conta Juridica</td>
                <td class="status">
                  <svg
                    width="24"
                    height="24"
                    transform="scale(1, -1)"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      stroke="#00C239"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M6 13l3-3 7 7"
                    />
                  </svg>
                </td>
              </tr>
              <tr>
                <td class="feat">Feat 2</td>
                <td class="status">
                  <svg
                    width="24"
                    height="24"
                    transform="scale(1, -1)"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      stroke="#CCC"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M6 13l3-3 7 7"
                    />
                  </svg>
                </td>
              </tr>
              <tr>
                <td class="feat">Contador</td>
                <td class="status">
                  <svg
                    width="24"
                    height="24"
                    transform="scale(1, -1)"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      stroke="#CCC"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M6 13l3-3 7 7"
                    />
                  </svg>
                </td>
              </tr>
            </tbody>
          </table>
      </div>
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://code.jquery.com/jquery-3.7.1.slim.min.js"
      integrity="sha256-kmHvs0B+OpCW5GVHUNjv9rOmY0IvSIRcf7zGUDTDQM8="
      crossorigin="anonymous"
    ></script>
    <script>
      const contentAText = document.getElementById("conteudo-cnpj");
      const contentBText = document.getElementById("conteudo-fiscal");

      const trilhaFiscal = document.getElementById("trilha-fiscal");

      const navTrilha = document.getElementById("trilha-pills-tab");
      const navParceiros = document.getElementById("parceiros-pills-tab");

      const parceirosCowork = document.getElementById("parceiros-cowork");
      const parceirosNubank = document.getElementById("parceiros-nubank");

      const conteudoElem = document.getElementById("conteudo-FADE");

      const tableFeaturesTable = document.getElementById("features-table");
      const tableFeaturesContent =
        tableFeaturesTable.getElementsByTagName("tbody")[0];

      function getCheckmarkSvg(isActive = false) {
        const svg = document.createElementNS(
          "http://www.w3.org/2000/svg",
          "svg"
        );
        svg.setAttribute("width", 24);
        svg.setAttribute("height", 24);
        svg.setAttribute("transform", "scale(1, -1)"); // Flip for active state
        svg.setAttribute("fill", "none");

        const path = document.createElementNS(
          "http://www.w3.org/2000/svg",
          "path"
        );
        path.setAttribute("stroke", isActive ? "#00C239" : "#CCC");
        path.setAttribute("stroke-linecap", "round");
        path.setAttribute("stroke-linejoin", "round");
        path.setAttribute("stroke-width", 2);
        path.setAttribute("d", "M6 13l3-3 7 7");

        svg.appendChild(path);
        return svg.outerHTML;
      }
      const conteudo = {
        cowork: {
          cnpj: {
            text: "a COWORK vai abrir seu CNPJ e encontra um contator parceiro para voce",
            features: new Set(["Conta Juridica", "Contador"]),
          },
          fiscal:
            "nao se preocupe com seu local fiscal, abrimos para voce, e pode fazer uso do nosso certificado",
        },
        nubank: {
          cnpj: {
            text: "abra sua conta de banco juridica com a gente, e a parte fiscal fica sob sua responsabilidade junto a prefeitura local",
            features: new Set(["Conta Juridica"]),
          },
        },
      };

      let trilhaAtual = "cnpj",
        parceiroAtual = "cowork";
      const atualizarConteudo = () => {
        let p = parceiroAtual.replace("parceiros-", "");
        let t = trilhaAtual.replace("trilha-", "");

        let conteudoAtual = conteudo[p][t];
        if (t === "cnpj") {
          tableFeaturesTable.hidden = false;
          const featCells = tableFeaturesContent.querySelectorAll("td.feat");
          const statusCells =
            tableFeaturesContent.querySelectorAll("td.status");

          for (let i = 0; i < featCells.length; i++) {
            statusCells[i].innerHTML = getCheckmarkSvg(
              conteudoAtual.features.has(featCells[i].textContent)
            );
          }

          conteudoElem.textContent = conteudoAtual.text;
        } else {
          tableFeaturesTable.hidden = true;
          conteudoElem.textContent = conteudoAtual;
        }
      };
      atualizarConteudo();

      navTrilha.addEventListener("click", function (e) {
        console.log(e.target.id);
        trilhaAtual = e.target.id;
        let t = trilhaAtual.replace("trilha-", "");
        if(t==="cnpj") tableFeaturesTable.hidden = false;
        let oferece = true;
        //ocultar parceiros que nao oferece a trilha
        for (let parceiro in conteudo) {
          if (conteudo[parceiro][t] === undefined) {
            document.getElementById(`parceiros-${parceiro}`).style.display =
              "none";
          } else {
            document.getElementById(`parceiros-${parceiro}`).style.display =
              "block";
          }
        }
        atualizarConteudo();
      });

      navParceiros.addEventListener("click", function (e) {
        if(e.target.id === "") return; //FIX BUG CLICK FANTASMA ID VAZIO
        parceiroAtual = e.target.id;
        atualizarConteudo();
      });
    </script>
  </body>
</html>
